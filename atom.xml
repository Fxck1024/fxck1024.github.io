<?xml version="1.0"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://arksec.net</id>
    <title>MrLee&#39;s Blog</title>
    <link href="https://arksec.net" />
    <updated>2024-08-01T12:00:05.000Z</updated>
    <category term="docker" />
    <category term="cs,免杀,Web安全" />
    <entry>
        <id>https://arksec.net/posts/f4d746ea.html</id>
        <title>docker搭建苹果cms</title>
        <link rel="alternate" href="https://arksec.net/posts/f4d746ea.html"/>
        <content type="html">&lt;p&gt;首先安装 docker，参考&lt;a href=&#34;https://arksec.net/posts/f255ffad.html&#34;&gt;这里&lt;/a&gt;&lt;br&gt;
然后运行下面的命令&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;built_in&#34;&gt;mkdir&lt;/span&gt; &lt;span class=&#34;built_in&#34;&gt;log&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;built_in&#34;&gt;mkdir&lt;/span&gt; conf&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;built_in&#34;&gt;mkdir&lt;/span&gt; cms&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;docker run -d  --restart=always --name nginx -p 80:80 -p 443:443 -v 自定义路径:自定义路径 -v ./conf:/etc/nginx/nginx.conf -v  ./conf/conf.d:/etc/nginx/conf.d -v ./certs:/etc/nginx/certs -v ./cms:/var/www/html -v ./log/nginx:/var/log/nginx --&lt;span class=&#34;built_in&#34;&gt;link&lt;/span&gt; php:php nginx:alpine&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;docker run -d --restart=always --name php -v 自定义路径:自定义路径 -v ./cms:/var/www/html kimoqi/php-fpm-all-ext:7.3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;docker run -d --name mysql --restart=always -v 自定义路径:自定义路径 -p 自定义端口:3306  -e MYSQL_ROOT_PASSWORD=自定义密码 -e MYSQL_USER=自定义用户名  -e MYSQL_DATABASE=自定义数据库名 mysql:5.7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;自行配置证书放到 certs&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;curl https://get.acme.sh | sh&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;~/.acme.sh/acme.sh --register-account -m xxxx@gmail.com&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;~/.acme.sh/acme.sh --issue -d 自定义域名 --standalone&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;~/.acme.sh/acme.sh --installcert -d 自定义域名 --key-file certs/key.pem --fullchain-file certs/cert.pem&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;编写 nginx 配置文件&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;events &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    worker_connections 1024;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;http &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    include       /etc/nginx/mime.types;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    default_type  application/octet-stream;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    sendfile        on;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    keepalive_timeout  65;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    client_max_body_size 1000m;  &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;comment&#34;&gt;#上传限制参数1G以内文件可上传&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;# HTTP server&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;server &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    listen 80;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    server_name 自定义域名;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;comment&#34;&gt;# Redirect all HTTP requests to HTTPS&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;built_in&#34;&gt;return&lt;/span&gt; 301 https://$host&lt;span class=&#34;variable&#34;&gt;$request_uri&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;# HTTPS server&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;server &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    listen 443 ssl http2;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    server_name 自定义域名;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;comment&#34;&gt;# http2 on;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    ssl_certificate /etc/nginx/certs/cert.pem;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    ssl_certificate_key /etc/nginx/certs/key.pem;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    root /var/www/html/apple;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    index index.php;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    rewrite ^/index.php(.*)$ /index.php?s=&lt;span class=&#34;variable&#34;&gt;$1&lt;/span&gt; last;   &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    rewrite ^/vip.php(.*)$ /vip.php?s=&lt;span class=&#34;variable&#34;&gt;$1&lt;/span&gt; last;    &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    rewrite ^/api.php(.*)$ /api.php?s=&lt;span class=&#34;variable&#34;&gt;$1&lt;/span&gt; last; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    rewrite ^(.*)$ /index.php?s=&lt;span class=&#34;variable&#34;&gt;$1&lt;/span&gt; last;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    try_files &lt;span class=&#34;variable&#34;&gt;$uri&lt;/span&gt; &lt;span class=&#34;variable&#34;&gt;$uri&lt;/span&gt;/ =404;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;comment&#34;&gt;# PHP-FPM configuration&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    location ~ \.php$ &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        fastcgi_pass php:9000;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        fastcgi_index index.php;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        fastcgi_param SCRIPT_FILENAME $document_root&lt;span class=&#34;variable&#34;&gt;$fastcgi_script_name&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        include fastcgi_params;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;下载源码&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;built_in&#34;&gt;mkdir&lt;/span&gt; cms/apple&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;wget https://github.com/magicblack/maccms_down/raw/master/maccms10.zip &amp;amp;&amp;amp; apt-get install -y unzip &amp;amp;&amp;amp; unzip maccms10.zip &amp;amp;&amp;amp; &lt;span class=&#34;built_in&#34;&gt;rm&lt;/span&gt; maccms10.zip &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;built_in&#34;&gt;mv&lt;/span&gt; maccms10-master/* cms/apple&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;下载主题&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;built_in&#34;&gt;cd&lt;/span&gt; apple/template/ &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;wget https://github.com/kejilion/Website_source_code/raw/main/DYXS2.zip&amp;amp;&amp;amp; unzip DYXS2.zip &amp;amp;&amp;amp; &lt;span class=&#34;built_in&#34;&gt;rm&lt;/span&gt; DYXS2.zip&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;配置主题&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;built_in&#34;&gt;cd&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;built_in&#34;&gt;cp&lt;/span&gt; cms/apple/template/DYXS2/asset/admin/Dyxs2.php cms/apple/application/admin/controller&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt; &lt;span class=&#34;built_in&#34;&gt;cp&lt;/span&gt; cms/apple/template/DYXS2/asset/admin/dycms.html cms/apple/application/admin/view/system&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;修改登陆文件&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;built_in&#34;&gt;mv&lt;/span&gt; cms/apple/admin.php cms/apple/vip.php&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;赋予权限&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;docker &lt;span class=&#34;built_in&#34;&gt;exec&lt;/span&gt; -it php &lt;span class=&#34;built_in&#34;&gt;chmod&lt;/span&gt; -R 777 /var/www/html&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;docker &lt;span class=&#34;built_in&#34;&gt;exec&lt;/span&gt; -it nginx &lt;span class=&#34;built_in&#34;&gt;chmod&lt;/span&gt; -R 777 /var/www/html&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;built_in&#34;&gt;chmod&lt;/span&gt; -R 777 cms&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;重启 nginx&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;docker restart nginx&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;打开&lt;a href=&#34;https://xn--eqrt2g/install.php%E6%8C%89%E6%8F%90%E7%A4%BA%E5%AE%89%E8%A3%85%E8%8B%B9%E6%9E%9Ccms&#34;&gt; https:// 域名 /install.php 按提示安装苹果 cms&lt;/a&gt;&lt;br&gt;
 进入首页 —— 自定义菜单配置，输入下面文字保存&lt;br&gt;
电影先生 2.0,/vip.php/admin/Dyxs2/dyxs2set&lt;br&gt;
 接下来安装超级播放器&lt;a href=&#34;https://wwm.lanzn.com/iSRw11x3z0wf&#34;&gt;超级播放器&lt;/a&gt;并上传到服务器 cms/play 下，nginx 配置文件&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;# HTTPS server&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;server &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    listen 443 ssl http2;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    server_name 自定义域名不能和第一个相同;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;comment&#34;&gt;# http2 on;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    ssl_certificate /etc/nginx/certs/cert.pem;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    ssl_certificate_key /etc/nginx/certs/key.pem;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    root /var/www/html/play/public;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    index index.php;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    rewrite ^/index.php(.*)$ /index.php?s=&lt;span class=&#34;variable&#34;&gt;$1&lt;/span&gt; last;   &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    rewrite ^(.*)$ /index.php?s=&lt;span class=&#34;variable&#34;&gt;$1&lt;/span&gt; last;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    try_files &lt;span class=&#34;variable&#34;&gt;$uri&lt;/span&gt; &lt;span class=&#34;variable&#34;&gt;$uri&lt;/span&gt;/ =404;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;comment&#34;&gt;# PHP-FPM configuration&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    location ~ \.php$ &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        fastcgi_pass php:9000;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        fastcgi_index index.php;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        fastcgi_param SCRIPT_FILENAME $document_root&lt;span class=&#34;variable&#34;&gt;$fastcgi_script_name&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        include fastcgi_params;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;赋予权限&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;built_in&#34;&gt;chmod&lt;/span&gt; -R 777 cms&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;打开&lt;a href=&#34;https://xn--eqrt2g/%E5%AE%89%E8%A3%85%EF%BC%8C%E6%8C%89%E7%85%A7%E6%96%87%E4%BB%B6%E8%87%AA%E5%B8%A6%E6%96%87%E6%A1%A3%E9%85%8D%E7%BD%AE&#34;&gt; https:// 域名 / 安装，按照文件自带文档配置&lt;/a&gt;&lt;br&gt;
解析接口配置为&lt;a href=&#34;https://xn--eqrt2g/player/index.php?code=%E6%92%AD%E6%94%BE%E5%99%A8%E7%BC%96%E7%A0%81&amp;amp;if=1&amp;amp;url=&#34;&gt; https:// 域名 /player/index.php?code = 播放器编码 &amp;amp; if=1&amp;amp;url=&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;下载萌兔采集插件&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;built_in&#34;&gt;cd&lt;/span&gt; cms/apple&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;wget&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;https://www.mycj.pro/upload/%E8%90%8C%E8%8A%BD%E9%87%87%E9%9B%86%E6%8F%92%E4%BB%B6Pro%20v10.7.3.zip &amp;amp;&amp;amp; unzip &lt;span class=&#34;string&#34;&gt;&amp;#x27;萌芽采集插件Pro v10.7.3.zip&amp;#x27;&lt;/span&gt; &amp;amp;&amp;amp; &lt;span class=&#34;built_in&#34;&gt;rm&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;&amp;#x27;萌芽采集插件Pro v10.7.3.zip&amp;#x27;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;docker &lt;span class=&#34;built_in&#34;&gt;exec&lt;/span&gt; -it php &lt;span class=&#34;built_in&#34;&gt;chmod&lt;/span&gt; -R 777 /var/www/html&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;docker &lt;span class=&#34;built_in&#34;&gt;exec&lt;/span&gt; -it nginx &lt;span class=&#34;built_in&#34;&gt;chmod&lt;/span&gt; -R 777 /var/www/html&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;built_in&#34;&gt;chmod&lt;/span&gt; -R 777 cms&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;在后台 点击应用 —— 应用市场，找到萌芽插件点击启用，刷新后可在首页左下角找到萌芽采集资源，点击绑定分类，可自动设置分类，点击播放配置修改成&lt;a href=&#34;https://xn--eqrt2g/player/index.php?code=%E6%92%AD%E6%94%BE%E5%99%A8%E7%BC%96%E7%A0%81&amp;amp;if=1&amp;amp;url=&#34;&gt; https:// 域名 /player/index.php?code = 播放器编码 &amp;amp; if=1&amp;amp;url=&lt;/a&gt;&lt;br&gt;
 点击采集内容&lt;/p&gt;
&lt;p&gt;最后大功告成&lt;br&gt;
记得屏蔽进行 IP 限制&lt;/p&gt;
</content>
        <category term="docker" />
        <updated>2024-08-01T12:00:05.000Z</updated>
    </entry>
    <entry>
        <id>https://arksec.net/posts/7fc8ee4.html</id>
        <title>alist</title>
        <link rel="alternate" href="https://arksec.net/posts/7fc8ee4.html"/>
        <content type="html">&lt;h4 id=&#34;alist一键搭建教程&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#alist一键搭建教程&#34;&gt;#&lt;/a&gt; alist 一键搭建教程&lt;/h4&gt;
&lt;h5 id=&#34;安装nginx&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#安装nginx&#34;&gt;#&lt;/a&gt; 安装 nginx&lt;/h5&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;#首先安装nginx方便反向代理&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;apt install nginx&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h5 id=&#34;申请证书&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#申请证书&#34;&gt;#&lt;/a&gt; 申请证书&lt;/h5&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;curl https://get.acme.sh | sh -s email=my@example.com&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;bash ~/.acme.sh/acme.sh --issue -d &lt;span class=&#34;string&#34;&gt;&amp;quot;域名&amp;quot;&lt;/span&gt; --standalone -k ec-256&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;bash ~/.acme.sh/acme.sh --install-cert -d &lt;span class=&#34;string&#34;&gt;&amp;quot;域名&amp;quot;&lt;/span&gt; --key-file /root/private.key --fullchain-file /root/cert.crt --ecc&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h5 id=&#34;编写nginx配置文件&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#编写nginx配置文件&#34;&gt;#&lt;/a&gt; 编写 nginx 配置文件&lt;/h5&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;#vim /etc/nginx/conf.d/test.conf&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;server &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    listen 443 ssl default_server;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    listen [::]:443 ssl default_server;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    ssl_reject_handshake on;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;server &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    listen 443 ssl;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    listen [::]:443 ssl;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    server_name example.com;  &lt;span class=&#34;comment&#34;&gt;#域名&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    ssl_certificate example.com.crt; &lt;span class=&#34;comment&#34;&gt;#证书&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    ssl_certificate_key example.com.key;#证书密钥&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;location / &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  proxy_set_header X-Forwarded-For &lt;span class=&#34;variable&#34;&gt;$proxy_add_x_forwarded_for&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  proxy_set_header X-Forwarded-Proto &lt;span class=&#34;variable&#34;&gt;$scheme&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  proxy_set_header Host &lt;span class=&#34;variable&#34;&gt;$http_host&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  proxy_set_header X-Real-IP &lt;span class=&#34;variable&#34;&gt;$remote_addr&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  proxy_set_header Range &lt;span class=&#34;variable&#34;&gt;$http_range&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	proxy_set_header If-Range &lt;span class=&#34;variable&#34;&gt;$http_if_range&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  proxy_redirect off;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  proxy_pass http://127.0.0.1:5244;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &lt;span class=&#34;comment&#34;&gt;# the max size of file to upload&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  client_max_body_size 20000m;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h5 id=&#34;安装docker&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#安装docker&#34;&gt;#&lt;/a&gt; 安装 docker&lt;/h5&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;curl -sSL https://get.docker.com/ | sh&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;systemctl start docker&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;systemctl &lt;span class=&#34;built_in&#34;&gt;enable&lt;/span&gt; docker&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h5 id=&#34;安装alist&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#安装alist&#34;&gt;#&lt;/a&gt; 安装 alist&lt;/h5&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;docker run -d --restart=always -v /etc/alist:/opt/alist/data -p 5244:5244 -e PUID=0 -e PGID=0 -e UMASK=022 --name=&lt;span class=&#34;string&#34;&gt;&amp;quot;alist&amp;quot;&lt;/span&gt; xhofe/alist-aria2:latest&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h5 id=&#34;添加一起看功能&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#添加一起看功能&#34;&gt;#&lt;/a&gt; 添加一起看功能&lt;/h5&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;#alist后台&amp;gt;全局设置&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;lt;script src=&lt;span class=&#34;string&#34;&gt;&amp;quot;https://2gether.video/release/extension.website.user.js&amp;quot;&lt;/span&gt;&amp;gt;&amp;lt;/script&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;lt;script&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;document.addEventListener(&lt;span class=&#34;string&#34;&gt;&amp;quot;DOMContentLoaded&amp;quot;&lt;/span&gt;, () =&amp;gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  const seAList = document.createElement(&lt;span class=&#34;string&#34;&gt;&amp;quot;style&amp;quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  seAList.innerHTML = `&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    .left-toolbar-box &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        left: var(--hope-space-5);&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        right: auto;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;`;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  document.body.appendChild(seAList);&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;lt;/script&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</content>
        <updated>2024-02-14T03:57:05.000Z</updated>
    </entry>
    <entry>
        <id>https://arksec.net/posts/c16c6dcf.html</id>
        <title>cobaltstrike免杀记录</title>
        <link rel="alternate" href="https://arksec.net/posts/c16c6dcf.html"/>
        <content type="html">&lt;p&gt;待更新。。。&lt;/p&gt;
</content>
        <category term="cs,免杀,Web安全" />
        <updated>2024-02-01T06:12:19.000Z</updated>
    </entry>
    <entry>
        <id>https://arksec.net/posts/8544442c.html</id>
        <title>ipv6</title>
        <link rel="alternate" href="https://arksec.net/posts/8544442c.html"/>
        <content type="html">&lt;p&gt;之前收了个 server-factory 的 v6 小鸡，记录一下折腾历史。&lt;br&gt;
首先让小鸡支持访问 ipv4 的网站，&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;built_in&#34;&gt;mv&lt;/span&gt; /etc/resolv.conf /etc/resolv.conf.bak &amp;amp;&amp;amp; &lt;span class=&#34;built_in&#34;&gt;echo&lt;/span&gt; -e &lt;span class=&#34;string&#34;&gt;&amp;quot;nameserver 2001:67c:2b0::4\nnameserver 2001:67c:2b0::6&amp;quot;&lt;/span&gt; &amp;gt; /etc/resolv.conf&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;然后就安装 warp 添加 ipv4&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;wget -N https://gitlab.com/fscarmen/warp/-/raw/main/menu.sh &amp;amp;&amp;amp; bash menu.sh 4 Lisence 设备名&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;#参考https://gitlab.com/fscarmen/warp/-/blob/main/README.md#warp-%E8%BF%90%E8%A1%8C%E8%84%9A%E6%9C%AC&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</content>
        <updated>2023-12-14T02:15:32.000Z</updated>
    </entry>
    <entry>
        <id>https://arksec.net/posts/490e9480.html</id>
        <title>vps</title>
        <link rel="alternate" href="https://arksec.net/posts/490e9480.html"/>
        <content type="html">&lt;h4 id=&#34;修改ssh端口&#34;&gt;&lt;a href=&#34;#修改ssh端口&#34; class=&#34;headerlink&#34; title=&#34;修改ssh端口&#34;&gt;&lt;/a&gt;修改ssh端口&lt;/h4&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;sed -i &lt;span class=&#34;hljs-string&#34;&gt;&amp;quot;s/#Port 22/Port 38752/g&amp;quot;&lt;/span&gt; /etc/ssh/sshd_config
&lt;span class=&#34;hljs-comment&#34;&gt;#或者使用脚本&lt;/span&gt;
wget https://www.moerats.com/usr/down/sshport.sh
bash sshport.sh
service ssh restart&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;添加Swap虚拟内存&#34;&gt;&lt;a href=&#34;#添加Swap虚拟内存&#34; class=&#34;headerlink&#34; title=&#34;添加Swap虚拟内存&#34;&gt;&lt;/a&gt;添加Swap虚拟内存&lt;/h4&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;wget https://www.moerats.com/usr/shell/swap.sh &amp;amp;&amp;amp; bash swap.sh&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;防ssh爆破&#34;&gt;&lt;a href=&#34;#防ssh爆破&#34; class=&#34;headerlink&#34; title=&#34;防ssh爆破&#34;&gt;&lt;/a&gt;防ssh爆破&lt;/h4&gt;&lt;pre&gt;&lt;code class=&#34;hljs bash&#34;&gt;apt install iptables fail2ban -y
vim /etc/fail2ban/jail.d/jail.local
service fail2ban restart
service fail2ban status

&lt;span class=&#34;hljs-comment&#34;&gt;#jail.local&lt;/span&gt;
[sshd]
port = 38752
maxretry = 3
bantime = 6d
&lt;/code&gt;&lt;/pre&gt;</content>
        <updated>2023-05-29T03:39:53.000Z</updated>
    </entry>
    <entry>
        <id>https://arksec.net/posts/f255ffad.html</id>
        <title>docker</title>
        <link rel="alternate" href="https://arksec.net/posts/f255ffad.html"/>
        <content type="html">&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;#install&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;curl -sSL https://get.docker.com/ | sh&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;systemctl start docker&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;systemctl &lt;span class=&#34;built_in&#34;&gt;enable&lt;/span&gt; docker&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;#remove&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;docker stop $(docker ps -a -q)&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;docker &lt;span class=&#34;built_in&#34;&gt;rm&lt;/span&gt; $(docker ps -a -q)&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;docker rmi $(docker images -q)&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;apt purge docker docker-engine docker.io containerd runc  docker-ce-cli docker-ce&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</content>
        <updated>2023-05-29T03:38:17.000Z</updated>
    </entry>
</feed>
